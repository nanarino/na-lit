---
import App from "@/layouts/app.astro"
---

<App title="ä¸‹æ‹‰æ°£æ³¡">
    <script>
        // å®Œç¾å¯¦ç¾ï¼Œ éœ€è¦ Chrome â‰¥ 125
        import "@/components/Dropdown/next"

        // å…¼å®¹å¯¦ç¾ï¼Œé»æ“Šå…ƒä»¶å¤–éƒ¨ç„¡æ³•é—œé–‰ï¼Œ WIN 7 å¯ç”¨
        // import "@/components/Dropdown"

        // ç°¡æ˜“å¯¦ç¾ï¼ŒéChromeå¤§æŠµå¯ç”¨ å¯é…ç½®é …å°‘
        // import "@/components/Dropdown/simple"
    </script>
    <section>
        <!-- `closetarget="[type=submit]"` è‡ªè¨‚é»æ“Šå†…éƒ¨æ™‚è‡ªå‹•é—œé–‰æ¢ä»¶ -->
        <!-- `closesoon="true"` é»æ“Šå†…éƒ¨æ™‚ ç«‹å³é—œé–‰ï¼ˆè©²è™•ä¿‚ astro çš„ [attr] æ¸²æŸ“ç‚º [attr="true"]ğŸ«¡ï¼‰-->
        <na-dropdown closetarget="[type=submit]" closesoon>
            <button class="na-button"> é€£çµ¡å…ˆ </button>
            <button class="na-button" slot="dropdown" type="submit">
                <iconify-icon icon="line-md:email" width="16" height="16">
                </iconify-icon>
                <span> email </span>
            </button>
            <button class="na-button" slot="dropdown" data-primary>
                <iconify-icon icon="line-md:twitter" width="16" height="16">
                </iconify-icon>
                <span> twitter </span>
            </button>
            <button class="na-button" slot="dropdown" data-primary>
                <iconify-icon icon="line-md:instagram" width="16" height="16">
                </iconify-icon>
                <span> instagram </span>
            </button>
        </na-dropdown>

        <hr class="na-divider" />

        <!-- `dialog-popover="manual"` æœƒç¦ç”¨è‡ªå‹•é—œé–‰ -->
        <!-- `dialog-style="inset:unset;"` è‡ªè¨‚å®šä½å’Œåç§»æ¨£å¼ -->
        <na-dropdown
            dialog-popover="manual"
            dialog-style="left: unset; transform: unset; right: anchor(right);"
        >
            <button class="na-button" style="--color-button: var(--red-6);">
                <iconify-icon
                    icon="line-md:youtube-filled"
                    width="24"
                    height="24"
                >
                </iconify-icon>
            </button>
            <button class="na-button" slot="dropdown">
                <iconify-icon icon="line-md:thumbs-up" width="16" height="16">
                </iconify-icon>
                <span> I Like </span>
            </button>
            <button class="na-button" slot="dropdown">
                <iconify-icon icon="line-md:star" width="16" height="16">
                </iconify-icon>
                <span> Add Star </span>
            </button>
            <button class="na-button" slot="dropdown">
                <iconify-icon
                    icon="line-md:download-outline"
                    width="16"
                    height="16"
                >
                </iconify-icon>
                <span> Download </span>
            </button>
        </na-dropdown>
    </section>
    <script>
        async function onload() {
            // code-ignore-start
            const loadingElements = document.querySelectorAll(":not(:defined)")
            const tags = new Set([...loadingElements].map(ele => ele.localName))
            await Promise.all(
                [...tags].map(tag => customElements.whenDefined(tag))
            )
            // code-ignore-end
            for (const element of document.querySelectorAll("na-dropdown")) {
                // ç¨‹å¼æ§åˆ¶æ°£æ³¡æ¡†
                // element.toggle()

                if (!element.dialog) continue

                // ç¨‹å¼æ§åˆ¶æ°£æ³¡æ¡†ï¼ˆindexï¼‰ï¼š
                // element.dialog.open = true
                // element.dialog.open = false // ä¸è¦ç”¨é€™å€‹ æœ‰ç›£è½ @close å‰¯ä½œç”¨
                // element.dialog.show()
                // element.dialog.close()

                // ç¨‹å¼æ§åˆ¶æ°£æ³¡æ¡†ï¼ˆnext/simpleï¼‰ï¼š
                // dialog.togglePopover()
                // dialog.showPopover()
                // dialog.hidePopover()
            }
        }

        // code-ignore-start
        document.addEventListener("astro:after-swap", e => {
            if (e.target) {
                const pathname = (e.target as Document).location.pathname
                const base = import.meta.env.BASE_URL
                const components = pathname.replace(RegExp(`^${base}`), "")
                if (components === "na-dropdown") onload()
            }
        })
        // code-ignore-end

        onload()
    </script>
    <style>
        [slot="dropdown"] {
            gap: 4px;
        }

        na-dropdown:not([data-loaded]) [slot="dropdown"] {
            display: none;
        }

        [dialog-popover="manual"] {
            align-self: end;
        }
    </style>
</App>

<style>
    section {
        padding: 2rem;
        display: flex;
        flex-direction: column;
        align-items: start;
    }

    hr {
        width: 100%;
    }

    iconify-icon {
        width: attr(width px);
        height: attr(height px);
    }
</style>
